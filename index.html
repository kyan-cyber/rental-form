rental-form/index.html
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>貸出フォーム</title>
</head>
<body>
<h1>貸出フォーム</h1>
<form id="rentalForm">
<input type="hidden" id="userId" name="userId">
<label>物品:</label><input type="text" id="item" name="item"><br>
<label>操作:</label>
<select id="action" name="action">
<option value="貸出">貸出</option>
<option value="返却">返却</option>
</select><br>
<button type="submit">送信</button>
</form>

<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
// LIFF初期化とユーザーID取得
liff.init({ liffId: "2007393080-wv2Vmo6D" }).then(() => {
if (!liff.isLoggedIn()) {
liff.login();
} else {
liff.getProfile().then(profile => {
document.getElementById("userId").value = profile.userId;
});
}
});

// 送信処理
document.getElementById("rentalForm").addEventListener("submit", function(e) {
e.preventDefault();
const data = {
userId: document.getElementById("userId").value,
item: document.getElementById("item").value,
action: document.getElementById("action").value
};
fetch("https://script.google.com/macros/s/AKfycbzShpUoHT-Uupu-8YeGsXZIPxkwtmWqad6v66f3Oo17TfWDiurMSdSoo3E2ZaLIDs63/exec", {
method: "POST",
body: JSON.stringify(data),
headers: { "Content-Type": "application/json" }
}).then(() => {
alert("送信しました");
liff.closeWindow();
});
});
</script>
</body>
</html>

