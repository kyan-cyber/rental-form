<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>カード開封ガチャ 豪華版</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; margin: 20px; background: #111; color: #eee;}
  h1 { text-shadow: 0 0 10px #ff0; }
  #drawBtn {
    padding: 15px 40px;
    font-size: 1.5em;
    font-weight: bold;
    background: linear-gradient(45deg, #ff6, #fc0);
    border: none;
    border-radius: 15px;
    box-shadow: 0 0 15px #fc0;
    cursor: pointer;
    transition: box-shadow 0.3s ease;
    margin-top: 30px;
  }
  #drawBtn:hover {
    box-shadow: 0 0 30px #fff;
  }
  #card {
    margin: 30px auto;
    border: 5px solid #333;
    padding: 20px;
    width: 280px;
    border-radius: 15px;
    background: linear-gradient(135deg, #222, #444);
    color: #fff;
    position: relative;
    overflow: visible;
  }
  #card img {
    width: 240px;
    height: 240px;
    object-fit: contain;
    border-radius: 15px;
    transform-origin: center;
  }
  .N { border-color: gray; }
  .R { border-color: #3399ff; }
  .SR { border-color: #9933ff; }
  .UR { border-color: #ff9933; }
  .SE { border-color: #ff3333; }
  #resultName {
    font-size: 1.3em;
    margin-top: 10px;
    text-shadow: 0 0 10px #000;
  }
  #resultRarity {
    font-weight: bold;
    font-size: 1.1em;
    margin-top: 5px;
    text-shadow: 0 0 10px #000;
  }
  /* アニメーション */
  @keyframes cardAppear {
    0% {
      opacity: 0;
      transform: rotateY(90deg) scale(0.5);
    }
    50% {
      opacity: 1;
      transform: rotateY(0deg) scale(1.2);
    }
    100% {
      opacity: 1;
      transform: rotateY(0deg) scale(1);
    }
  }
  .animate {
    animation: cardAppear 1.5s ease forwards;
  }
  /* レア度別光のエフェクト */
  .R.effect {
    box-shadow: 0 0 15px #3399ff;
  }
  .SR.effect {
    box-shadow: 0 0 25px #9933ff;
  }
  .UR.effect {
    box-shadow: 0 0 30px #ff9933;
  }
  .SE.effect {
    box-shadow: 0 0 40px #ff3333;
  }
</style>
</head>
<body>

<h1>カード開封ガチャ 豪華版</h1>
<button id="drawBtn">ガチャを引く</button>

<div id="card" style="display:none;">
  <img id="cardImg" src="" alt="カード画像" />
  <div id="resultName"></div>
  <div id="resultRarity"></div>
</div>

<script>
const cards = [
  {name:"キャラA", rarity:"N", img:"https://via.placeholder.com/240x240?text=N1"},
  {name:"モンスターB", rarity:"N", img:"https://via.placeholder.com/240x240?text=N2"},
  {name:"キャラC", rarity:"R", img:"https://via.placeholder.com/240x240?text=R1"},
  {name:"モンスターD", rarity:"R", img:"https://via.placeholder.com/240x240?text=R2"},
  {name:"キャラE", rarity:"SR", img:"https://via.placeholder.com/240x240?text=SR1"},
  {name:"モンスターF", rarity:"SR", img:"https://via.placeholder.com/240x240?text=SR2"},
  {name:"キャラG", rarity:"UR", img:"https://via.placeholder.com/240x240?text=UR1"},
  {name:"モンスターH", rarity:"UR", img:"https://via.placeholder.com/240x240?text=UR2"},
  {name:"キャラI", rarity:"SE", img:"https://via.placeholder.com/240x240?text=SE1"},
  {name:"モンスターJ", rarity:"SE", img:"https://via.placeholder.com/240x240?text=SE2"},
  // 実際は50枚に増やしてください
];

const rarityProb = {
  N: 50,
  R: 25,
  SR: 15,
  UR: 7,
  SE: 3
};

function getRandomRarity() {
  const rand = Math.random() * 100;
  let sum = 0;
  for (const rarity in rarityProb) {
    sum += rarityProb[rarity];
    if (rand < sum) return rarity;
  }
  return "N";
}

function drawCard() {
  const rarity = getRandomRarity();
  const filtered = cards.filter(c => c.rarity === rarity);
  if (filtered.length === 0) {
    alert("カードデータ不足");
    return null;
  }
  const card = filtered[Math.floor(Math.random() * filtered.length)];
  return card;
}

document.getElementById("drawBtn").addEventListener("click", () => {
  const cardDiv = document.getElementById("card");
  cardDiv.style.display = "none";
  // モーションのため少し待つ
  setTimeout(() => {
    const card = drawCard();
    if (!card) return;
    const cardImg = document.getElementById("cardImg");
    const nameDiv = document.getElementById("resultName");
    const rarityDiv = docum
