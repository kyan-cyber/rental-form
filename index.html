<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>カード開封ガチャ</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
  #card {
    margin-top: 20px;
    border: 2px solid #333;
    padding: 20px;
    display: inline-block;
    width: 250px;
    border-radius: 10px;
  }
  #card img {
    width: 200px;
    height: 200px;
    object-fit: contain;
    border-radius: 10px;
  }
  .N { border-color: gray; }
  .R { border-color: blue; }
  .SR { border-color: purple; }
  .UR { border-color: orange; }
  .SE { border-color: red; }
  #resultName { font-size: 1.2em; margin-top: 10px; }
  #resultRarity { font-weight: bold; margin-top: 5px; }
  button {
    padding: 10px 20px;
    font-size: 1.1em;
    cursor: pointer;
  }
</style>
</head>
<body>

<h1>カード開封ガチャ</h1>
<button id="drawBtn">ガチャを引く</button>

<div id="card" style="display:none;">
  <img id="cardImg" src="" alt="カード画像" />
  <div id="resultName"></div>
  <div id="resultRarity"></div>
</div>

<script>
// カードデータ（50枚のうち一部例示。実際は50枚用意してください）
const cards = [
  {name:"キャラA", rarity:"N", img:"https://via.placeholder.com/200x200?text=N1"},
  {name:"モンスターB", rarity:"N", img:"https://via.placeholder.com/200x200?text=N2"},
  {name:"キャラC", rarity:"R", img:"https://via.placeholder.com/200x200?text=R1"},
  {name:"モンスターD", rarity:"R", img:"https://via.placeholder.com/200x200?text=R2"},
  {name:"キャラE", rarity:"SR", img:"https://via.placeholder.com/200x200?text=SR1"},
  {name:"モンスターF", rarity:"SR", img:"https://via.placeholder.com/200x200?text=SR2"},
  {name:"キャラG", rarity:"UR", img:"https://via.placeholder.com/200x200?text=UR1"},
  {name:"モンスターH", rarity:"UR", img:"https://via.placeholder.com/200x200?text=UR2"},
  {name:"キャラI", rarity:"SE", img:"https://via.placeholder.com/200x200?text=SE1"},
  {name:"モンスターJ", rarity:"SE", img:"https://via.placeholder.com/200x200?text=SE2"},
  // ...ここに50枚分カードデータを追加してください
];

// レアリティ毎の排出率（合計100）
const rarityProb = {
  N: 50,
  R: 25,
  SR: 15,
  UR: 7,
  SE: 3
};

function getRandomRarity() {
  const rand = Math.random() * 100;
  let sum = 0;
  for (const rarity in rarityProb) {
    sum += rarityProb[rarity];
    if (rand < sum) return rarity;
  }
  return "N"; // 保険
}

function drawCard() {
  const rarity = getRandomRarity();
  const filtered = cards.filter(c => c.rarity === rarity);
  if (filtered.length === 0) {
    alert("カードデータが不足しています。");
    return null;
  }
  const card = filtered[Math.floor(Math.random() * filtered.length)];
  return card;
}

document.getElementById("drawBtn").addEventListener("click", () => {
  const card = drawCard();
  if (!card) return;
  const cardDiv = document.getElementById("card");
  document.getElementById("cardImg").src = card.img;
  document.getElementById("resultName").textContent = card.name;
  document.getElementById("resultRarity").textContent = card.rarity;
  cardDiv.className = card.rarity;
  cardDiv.style.display = "inline-block";
});
</script>

</body>
</html>

